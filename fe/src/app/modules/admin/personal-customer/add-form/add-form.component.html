<div *ngIf="isVisible" @fadeInOut
    class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-999">
    <form *transloco="let t" [formGroup]="addForm" (ngSubmit)="submit()"
        class="bg-white rounded-lg shadow-lg w-full max-w-sm sm:max-w-sm md:max-w-md lg:max-w-md xl:max-w-lg overflow-hidden relative">
        <!-- Header -->
        <div class="flex items-center bg-primary text-white px-4 py-4">
            <h2 class="text-lg font-semibold">Thêm biểu mẫu</h2>

            <!-- Nút đóng "×" -->
            <button type="button" (click)="closeDialog()"
                class="ml-auto text-2xl font-bold text-white hover:text-gray-200 p-0 bg-transparent border-none leading-none focus:outline-none"
                aria-label="Đóng">
                &times;
            </button>
        </div>

        <!-- Body -->
        <div class="p-4 space-y-4">
            <fuse-alert class="mb-2" *ngIf="showAlert" [appearance]="'outline'" [showIcon]="false" [type]="alert.type"
                [@shake]="alert.type === 'error'">
                <ul class="list-disc pl-4">
                    <li *ngFor="let code of alert.code">
                        {{ t(code) || t('errors.default') }}
                    </li>
                </ul>
            </fuse-alert>
            <!-- Name -->
            <mat-form-field floatLabel="always" class="w-full fuse-mat-dense">
                <mat-label>Tên biểu mẫu</mat-label>
                <input matInput #firstFocus formControlName="name" placeholder="Nhập tên biểu mẫu" required />
                <mat-error *ngIf="addForm.get('name')?.hasError('required')">
                    Tên biểu mẫu là bắt buộc
                </mat-error>
            </mat-form-field>

            <!-- Description -->
            <mat-form-field floatLabel="always" class="w-full fuse-mat-dense">
                <mat-label>Mô tả</mat-label>
                <textarea matInput formControlName="description" placeholder="Nhập mô tả (không bắt buộc)"
                    rows="3"></textarea>
            </mat-form-field>
        </div>

        <!-- Footer -->
        <div class="px-4 pb-4 flex justify-start gap-2 text-md">
            <button type="submit" [disabled]="loading"
                class="px-4 py-2 bg-primary font-semibold text-white rounded-lg hover:bg-primary-600">
                {{ loading ? 'Đang lưu...' : 'Thêm' }}
            </button>
            <button type="button" (click)="closeDialog()"
                class="px-4 py-2 font-semibold border border-gray-200 rounded-lg hover:bg-gray-100">
                Hủy
            </button>
        </div>
    </form>
</div>